<div id="particles" style="background-color: #00002f" mat-dialog-content>
</div>
<div class="page">
    <ng-container *ngIf="user | async; else login">
        <mat-card>
            <mat-card-title>
                Congrats You logged in without a password!
            </mat-card-title>
            <button mat-button color="warn" (click)="logout()">Sign Out</button>
        </mat-card>
    </ng-container>

    <ng-template #login>
        <h1 mat-dialog-title>Sign In</h1>
        <mat-card>
            <mat-card-title>Email</mat-card-title>
            <form [formGroup]="emailForm" (ngSubmit)="sendEmailLink()">
                <mat-form-field *ngIf="!emailSent">
                    <label>
                        <input matInput placeholder="Email" formControlName="email">
                    </label>
                </mat-form-field>
            </form>
            <button mat-flat-button color="primary" [disabled]="emailSent || emailForm.invalid"
                    (click)="sendEmailLink()">
                Get Login Link
            </button>

            <mat-card-footer *ngIf="emailSent">
                We sent you an email with your login link
            </mat-card-footer>
            <mat-card-footer *ngIf="errorMessage">
                {{ errorMessage }}
            </mat-card-footer>
        </mat-card>
    </ng-template>
</div>
